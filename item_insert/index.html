<html>
    <head>
        <style>
            #container {
                background-color: #ee6;
                width: 300px;
                height: 500px;
                overflow: auto;
            }
            .box {
                background-color: #99e;
                border: 8px solid #33e;
                width: 200px;
                height: 32px;
                padding: 10px;
                margin: 5px;
                position: relative;
            }
        </style>
    </head>
    <body>
        <div id="container">
        </div>
        <button onClick="insertDiv();">add box</button>
        <script>
            const box_height = 32;
            const box_padding = 10;
            const box_border = 8;
            const box_margin = 5;
            const initial_top = (-1)*(box_height+box_padding*2+box_border*2+box_margin);
            var i = 0;
            function insertDiv() {
                const container = document.getElementById("container");
                const newBox = document.createElement("div");
                newBox.classList.add("box");
                newBox.textContent = `box ${i++}`;
                container.insertBefore(newBox, container.firstChild);
                
                initializeMoveBoxes();
                setTimeout(()=>{smoothMoveBoxes();}, 10);
            }

            function initializeMoveBoxes() {
                const boxes = document.querySelectorAll(".box");
                boxes.forEach(box => {
                    box.style.top = `${initial_top}px`;
                    box.style.transition = "top 0s";
                });
            }
            function smoothMoveBoxes() {
                const boxes = document.querySelectorAll(".box");
                boxes.forEach(box => {
                    box.style.top = "0px";
                    box.style.transition = "top 0.5s ease";
                });
            }
        </script>
    </body>
</html>
